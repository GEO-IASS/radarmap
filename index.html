<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="http://openlayers.org/en/v3.5.0/css/ol.css" type="text/css">
    <style>
      .map {
        height: 100%;
        width: 100%;
      }
    </style>
    <script src="http://openlayers.org/en/v3.5.0/build/ol.js" type="text/javascript"></script>
    <title>Карта радаров</title>
  </head>
  <body>
    <div id="map" class="map"></div>
    <script type="text/javascript">
        var attribution = new ol.control.Attribution({
            collapsible: false
        });
        var osmLayer = new ol.layer.Tile({
            source: new ol.source.MapQuest({layer: 'osm'}),
            saturation: 0,
        });
        var cartoDBnoLabelsLayer = new ol.layer.Tile({
            source: new ol.source.XYZ({
                //url: 'http://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}.png',
                url: 'http://{s}.basemaps.cartocdn.com/dark_nolabels/{z}/{x}/{y}.png',
                attributions: [new ol.Attribution({ html: ['&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'] })]
            })
        });
        var HyddaRoadAndLabels = new ol.layer.Tile({
            source: new ol.source.XYZ({
                url: 'http://{s}.tile.openstreetmap.se/hydda/roads_and_labels/{z}/{x}/{y}.png',
                attributions: [new ol.Attribution({ html: ['Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'] })]
            })
        });
        // other possibilities:
        // - opemapsurfer, has B&W
        // - CartoDB.PositronNoLabels, Hydda.RoadsAndLabels

        var extent1 = [4363717.48, 7196556.306]
        var extent2 = [5427495.549, 8063129.045]
        var extent = [extent1[0], extent1[1], extent2[0], extent2[1]];
        var imageLayerNN = new ol.layer.Image({
            source: new ol.source.ImageStatic({
                url: 'images/Nizhny-merc-latest.png',
                imageExtent: extent, 
                attributions: [
                    new ol.Attribution({
                        html: 'Данные с радаров &copy; <a href="http://meteorad.ru/">ФГБУ «Центральная аэрологическая обсерватория» Росгидромета, «Научно-технический центр по развитию и эксплуатации сети доплеровских метеорологических радиолокаторов» (НТЦР ДМРЛ)</a>'
                    })
                ],
            }),
            opacity: 0.8,
         });

        var extent1 = [4012117.97, 7487716.629]
        var extent2 = [5119869.004, 8390227.806]
        var extent = [extent1[0], extent1[1], extent2[0], extent2[1]];
        var imageLayerK = new ol.layer.Image({
            source: new ol.source.ImageStatic({
                url: 'images/Kostroma-merc-latest.png',
                imageExtent: extent, 
            }),
            opacity: 0.8
         });

        var extent1 = [3656881.616, 7074384.011]
        var extent2 = [4702991.155, 7926520.428]
        var extent = [extent1[0], extent1[1], extent2[0], extent2[1]];
        var imageLayerP = new ol.layer.Image({
            source: new ol.source.ImageStatic({
                url: 'images/Moscow-merc-latest.png',
                imageExtent: extent, 
            }),
            opacity: 0.8
         });
         
        var map = new ol.Map({
            target: 'map',
            layers: [
                osmLayer,
                //cartoDBnoLabelsLayer,
                //HyddaRoadAndLabels,
                imageLayerNN,
                imageLayerK,
                imageLayerP
            ],
            //renderer: 'webgl',
            controls: ol.control.defaults({ attribution: false }).extend([attribution]),
            view: new ol.View({
            center: [4895650.867513087, 7617122.422797349],
            zoom: 8
            })
        });
    </script>
  </body>
</html>
